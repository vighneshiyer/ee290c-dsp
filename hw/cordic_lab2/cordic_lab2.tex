\input{../common.tex}

\newcommand{\headertext}{EE290C CORDIC Lab 2}
\renewcommand{\thesubsection}{\thesection.\alph{subsection}}

\title{\vspace{-0.4in}\Large \bf \headertext \vspace{-0.1in}}
\author{Vighnesh Iyer}

\date{\today}
\maketitle

\markboth{\headertext}{\headertext}
\thispagestyle{empty}

\section{Type Generic CORDIC}
I genericified my CORDIC and found that at least \textbf{27 stages} were required for the \verb|DspReal| version to achieve 2 LSB precision.

I think my usage of typeclasses was excessive, but I just kept adding what was needed to get the code to compile. Is there a way to alias a conjunction of typeclasses like

\begin{minted}{scala}
typeclass CORDICNumber = Data : Ring : BinaryRepresentation : ConvertableTo : Order
\end{minted}

\section{Synthesis}
I modified the \verb|runhammer.sh| script to sweep precision from 8 to 24 in steps of 2 with fixed \verb|stagesPerCycle| of 1 and to sweep \verb|stagesPerCycle| within [1, 2, 4, 8, 16] for fixed precision of 18 (which yields 16 stages). \verb|runhammer.sh| was also modified to run a local Vivado Webpack edition (so I'm synthesizing for a Kintex Ultrascale+ part).

The number of DSPs was always zero, so I'm going to compare the LUT and FDRE utilization versus the module parameters.

\section{Rocket-Chip Integration}
I filled in the template provided to integrate the CORDIC block as a diplomatic TL module. I tested the rotation mode across the same 16 angles I tested in Scala, and dumped the output to \verb|fa18-by/verisim/vectoring.out|. A reference output was generated by the \verb|CORDIC.ipynb| notebook and is in \verb|fa18-by/verisim/vectoring.gold|. Running \verb|diff --color vectoring.out vectoring.gold| shows the RTL simulation matches the reference within 0-2 LSBs.

\end{document}
